{
    "contents" : "##'  Parse GPX file\n##'\n##' main functions to parse GPX file, see package description for more details\n##' @param file.path file path to .GPX file\n##' @return list \n##' @export \n##' @author Yi Tang\nParse_GPX <-\n    function(file.path) {\n        gpx.list <- readGPX(file.path)\n        track.info <- do.call(rbind, gpx.list$tracks[[1]]) ## stack loops, some paused activities \n        setDT(track.info)\n        ## track.poly <- track.info[, Polygons(list(Polygon(cbind(lon, lat))), ID = file.path)]\n        track.info[, time := gsub(pattern = \"T\", \" \", time)]\n        track.info[, time := gsub(pattern = \"Z\", \"\", time)]\n        track.info[, ele := as.numeric(ele)]\n        \n\n        ## activity information \n        time2 <- track.info[, strptime(time, format = \"%Y-%m-%d %H:%M:%S\")]\n        start.time <- format(time2[1], \"%H:%M:%s\")\n        date <- format(time2[1], \"%Y-%m-%d\")\n        duration <- sum(as.numeric(time2[length(time2)] - time2[1], unit = \"hours\"))\n        n <- nrow(track.info)\n        distance <- sum(track.info[, GCD_pairs(lon[-1], lat[-1], lon[-n], lat[-n])])\n        speed <- distance / duration \n        climb <- sum(abs(diff(track.info$ele)))\n        ele <- mean(track.info$ele)\n\n        activity.info <- data.table(date,\n                                    start.time,\n                                    name = remove.na(names(gpx.list$tracks[[1]])),\n                                    \"duration (h)\" = duration,\n                                    \"distance (km)\" = distance,\n                                    \"speed (km/h)\" = speed,\n                                    \"elevation (m)\" = ele,\n                                    \"climb (m)\" = climb)\n        res <- list(track.info,\n                    activity.info)\n        res\n    }\n",
    "created" : 1429813651234.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3552401064",
    "id" : "FACA93C8",
    "lastKnownWriteTime" : 1429813594,
    "path" : "~/Desktop/RExercise/R/Parse_GPX.R",
    "project_path" : "R/Parse_GPX.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}